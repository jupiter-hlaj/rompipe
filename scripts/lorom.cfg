# lorom.cfg — ld65 LoROM linker configuration for NES→SNES port
# Generated/used by build_snes_rom.py (which writes a dynamic version per ROM).
# This file is the static template; the pipeline generates the actual config.
#
# LoROM memory map:
#   Each SNES bank N maps ROM to $N8000–$NFFFF (32KB per bank)
#   File offset = bank_number * $8000 + (address - $8000)
#
# Bank assignments:
#   $00: system stubs (PPU wrappers, mapper stubs, SNES header + vectors)
#   $01–$1D: translated NES PRG banks
#   $1E: SPC700 audio driver
#   $1F: CHR data + overflow

MEMORY {
    BANK00: start = $008000, size = $7FE0, fill = yes, fillval = $FF, file = %O;
    VECTORS: start = $00FFE0, size = $0020, fill = yes, fillval = $FF, file = %O;
    BANK01: start = $018000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK02: start = $028000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK03: start = $038000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK04: start = $048000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK05: start = $058000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK06: start = $068000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK07: start = $078000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK08: start = $088000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK09: start = $098000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK0A: start = $0A8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK0B: start = $0B8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK0C: start = $0C8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK0D: start = $0D8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK0E: start = $0E8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK0F: start = $0F8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK10: start = $108000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK11: start = $118000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK12: start = $128000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK13: start = $138000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK14: start = $148000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK15: start = $158000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK16: start = $168000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK17: start = $178000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK18: start = $188000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK19: start = $198000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK1A: start = $1A8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK1B: start = $1B8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK1C: start = $1C8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK1D: start = $1D8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK1E: start = $1E8000, size = $8000, fill = yes, fillval = $FF, file = %O;
    BANK1F: start = $1F8000, size = $8000, fill = yes, fillval = $FF, file = %O;
}

SEGMENTS {
    BANK00:  load = BANK00,  type = ro, offset = $000000;
    VECTORS: load = VECTORS, type = ro, offset = $007FE0;
    BANK01:  load = BANK01,  type = ro, offset = $008000;
    BANK02:  load = BANK02,  type = ro, offset = $010000;
    BANK03:  load = BANK03,  type = ro, offset = $018000;
    BANK04:  load = BANK04,  type = ro, offset = $020000;
    BANK05:  load = BANK05,  type = ro, offset = $028000;
    BANK06:  load = BANK06,  type = ro, offset = $030000;
    BANK07:  load = BANK07,  type = ro, offset = $038000;
    BANK08:  load = BANK08,  type = ro, offset = $040000;
    BANK09:  load = BANK09,  type = ro, offset = $048000;
    BANK0A:  load = BANK0A,  type = ro, offset = $050000;
    BANK0B:  load = BANK0B,  type = ro, offset = $058000;
    BANK0C:  load = BANK0C,  type = ro, offset = $060000;
    BANK0D:  load = BANK0D,  type = ro, offset = $068000;
    BANK0E:  load = BANK0E,  type = ro, offset = $070000;
    BANK0F:  load = BANK0F,  type = ro, offset = $078000;
    BANK10:  load = BANK10,  type = ro, offset = $080000;
    BANK11:  load = BANK11,  type = ro, offset = $088000;
    BANK12:  load = BANK12,  type = ro, offset = $090000;
    BANK13:  load = BANK13,  type = ro, offset = $098000;
    BANK14:  load = BANK14,  type = ro, offset = $0A0000;
    BANK15:  load = BANK15,  type = ro, offset = $0A8000;
    BANK16:  load = BANK16,  type = ro, offset = $0B0000;
    BANK17:  load = BANK17,  type = ro, offset = $0B8000;
    BANK18:  load = BANK18,  type = ro, offset = $0C0000;
    BANK19:  load = BANK19,  type = ro, offset = $0C8000;
    BANK1A:  load = BANK1A,  type = ro, offset = $0D0000;
    BANK1B:  load = BANK1B,  type = ro, offset = $0D8000;
    BANK1C:  load = BANK1C,  type = ro, offset = $0E0000;
    BANK1D:  load = BANK1D,  type = ro, offset = $0E8000;
    BANK1E:  load = BANK1E,  type = ro, offset = $0F0000;
    BANK1F:  load = BANK1F,  type = ro, offset = $0F8000;
    ZEROPAGE: load = BANK00, type = zp;
    CODE:     load = BANK00, type = ro;
}
